{"version":3,"names":["_react","require","_swr","_interopRequireDefault","obj","__esModule","default","useCompletion","api","id","initialCompletion","initialInput","credentials","headers","body","onResponse","onFinish","onError","arguments","length","undefined","hookId","useId","completionId","data","mutate","useSWR","fallbackData","isLoading","mutateLoading","error","setError","useState","completion","abortController","setAbortController","extraMetadataRef","useRef","useEffect","current","triggerRequest","useCallback","prompt","options","AbortController","res","fetch","method","JSON","stringify","signal","catch","err","ok","Error","text","reader","json","content","name","stop","abort","setCompletion","complete","input","setInput","handleSubmit","handleInputChange","e"],"sourceRoot":"../../src","sources":["use-completion.ts"],"mappings":"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"}